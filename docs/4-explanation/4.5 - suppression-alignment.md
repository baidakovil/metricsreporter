## Explanation: Suppression Alignment and Namespace-Aware Tooling

Suppressions (`[SuppressMessage]`) and CLI namespace filters rely on stable fully qualified names (FQNs). When nested types, iterator classes, and multiple data sources get mixed, those FQNs can drift unless we normalize aggressively. This document describes how Metrics Reporter keeps suppressions and tooling aligned.

### Building consistent FQNs

- `FullyQualifiedNameBuilder` maintains parallel stacks for namespaces and types while walking the aggregated tree. Nested types become `Namespace.Outer.Inner`, even if AltCover originally emitted `Outer/Nested` or `Outer+Nested`.
- Suppression analysis maps Roslyn rule IDs to metric identifiers (e.g., `CA1506` → `RoslynClassCoupling`) and stores the resulting entries in `SuppressedSymbols.g.json`, keyed by the normalized FQNs above.

### Namespace-aware queries

- `NamespaceMatcher` (used by `metrics-reader`) treats `.`, `+`, and `:` as acceptable separators immediately after the namespace prefix. Queries such as `metrics-reader readany --namespace MetricsReporter --symbol-kind Type` therefore match both `MetricsReporter.Aggregation.StructuralElementMerger` and any nested types (`MetricsReporter.Aggregation.StructuralElementMerger.MemberResolutionContext`).
- CLI flags like `--include-suppressed` simply toggle whether suppressed entries are filtered during symbol queries; no extra mapping is required because the FQNs already align.

### Practical effects

- HTML lists each nested type only once, with suppressions, coverage, and SARIF breakdowns consolidated on that row.
- Baseline comparisons do not “forget” suppressions when only AltCover or SARIF reported a symbol—the normalized FQN remains stable.
- AI agents (and humans) can reason about suppressions by reviewing `SuppressedSymbols.g.json`, knowing the entries match the identifiers shown in dashboards and CLI output.

