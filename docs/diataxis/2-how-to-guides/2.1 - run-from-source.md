## How-to: Run Metrics Reporter Directly from Source

Sometimes you need to test an in-progress change without packing the tool. This guide shows how to execute the CLI straight from the repository, while keeping the consumer workflow untouched.

### When to use this approach

- You are iterating on CLI output (e.g., `metrics-reader` formatting) and need fast feedback.
- You have not bumped or published a new NuGet package yet.
- You want to compare the packaged behavior with the local source build.

### Prerequisites

- Working copy of the repo at `C:\Users\baidakov\metricsreporter`.
- .NET 8 SDK.
- Input artifacts (AltCover XML, Roslyn metrics, SARIF, baseline) already available or referenced via CLI flags.

### Step 1: Build the tool project

```powershell
cd C:\Users\baidakov\metricsreporter
dotnet build MetricsReporter.Tool/MetricsReporter.Tool.csproj
```

This produces `MetricsReporter.Tool/bin/Debug/net8.0/MetricsReporter.Tool.dll`, which the `dotnet run` invocation will execute.

### Step 2: Run the CLI with `dotnet run --project`

```powershell
dotnet run --project MetricsReporter.Tool/MetricsReporter.Tool.csproj -- `
  metrics-reader readany `
  --report C:\work\build\Metrics\Report\MetricsReport.g.json `
  --namespace Sample.Loader `
  --metric Coupling `
  --all
```

- Everything after `--` is passed verbatim to the Spectre command parser.
- The command uses the same DI container and configuration wiring as the packaged tool, so behavior matches release builds.

### Step 3: Compare against the installed tool (optional)

```powershell
dotnet tool run metricsreporter metrics-reader readany `
  --namespace Sample.Loader `
  --metric Coupling
```

If the outputs differ, you know the regression lives in your local changes. Once satisfied, follow the shipping guide to publish the update.

### Step 4: Execute the generator directly (optional)

To aggregate metrics without MSBuild:

```powershell
dotnet run --project MetricsReporter/MetricsReporter.csproj -- `
  --solution-name "sample-plugin" `
  --metrics-dir "C:\\work\\build\\Metrics" `
  --altcover "C:\\work\\build\\Metrics\\AltCover\\coverage-runtime.xml" `
  --roslyn "C:\\work\\build\\Metrics\\Roslyn\\Sample.Loader.xml" `
  --sarif "C:\\work\\build\\Metrics\\Sarif\\Sample.Loader.sarif" `
  --baseline "C:\\work\\build\\MetricsTemp\\MetricsBaseline.g.json" `
  --output-json "C:\\work\\build\\Metrics\\Report\\MetricsReport.g.json" `
  --output-html "C:\\work\\build\\Metrics\\Report\\MetricsReport.html"
```

Use this when MSBuild targets are misbehaving or when you want to experiment with alternative data sources.

### Cleanup tip

Because `dotnet run` uses the compiled assemblies inside `bin/Debug`, you can just re-run `dotnet build` after each code changeâ€”no extra packaging or tool installation is required.

